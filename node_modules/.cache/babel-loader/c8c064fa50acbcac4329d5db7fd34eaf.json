{"ast":null,"code":"import PostgrestQueryBuilder from './lib/PostgrestQueryBuilder';\nimport PostgrestRpcBuilder from './lib/PostgrestRpcBuilder';\nimport { DEFAULT_HEADERS } from './lib/constants';\nexport default class PostgrestClient {\n  /**\n   * Creates a PostgREST client.\n   *\n   * @param url  URL of the PostgREST endpoint.\n   * @param headers  Custom headers.\n   * @param schema  Postgres schema to switch to.\n   */\n  constructor(url, {\n    headers = {},\n    schema,\n    fetch,\n    throwOnError\n  } = {}) {\n    this.url = url;\n    this.headers = Object.assign(Object.assign({}, DEFAULT_HEADERS), headers);\n    this.schema = schema;\n    this.fetch = fetch;\n    this.shouldThrowOnError = throwOnError;\n  }\n  /**\n   * Authenticates the request with JWT.\n   *\n   * @param token  The JWT token to use.\n   */\n\n\n  auth(token) {\n    this.headers['Authorization'] = `Bearer ${token}`;\n    return this;\n  }\n  /**\n   * Perform a table operation.\n   *\n   * @param table  The table name to operate on.\n   */\n\n\n  from(table) {\n    const url = `${this.url}/${table}`;\n    return new PostgrestQueryBuilder(url, {\n      headers: this.headers,\n      schema: this.schema,\n      fetch: this.fetch,\n      shouldThrowOnError: this.shouldThrowOnError\n    });\n  }\n  /**\n   * Perform a function call.\n   *\n   * @param fn  The function name to call.\n   * @param params  The parameters to pass to the function call.\n   * @param head  When set to true, no data will be returned.\n   * @param count  Count algorithm to use to count rows in a table.\n   */\n\n\n  rpc(fn, params, {\n    head = false,\n    count = null\n  } = {}) {\n    const url = `${this.url}/rpc/${fn}`;\n    return new PostgrestRpcBuilder(url, {\n      headers: this.headers,\n      schema: this.schema,\n      fetch: this.fetch,\n      shouldThrowOnError: this.shouldThrowOnError\n    }).rpc(params, {\n      head,\n      count\n    });\n  }\n\n}","map":{"version":3,"mappings":"AAAA,OAAOA,qBAAP,MAAkC,6BAAlC;AACA,OAAOC,mBAAP,MAAgC,2BAAhC;AAEA,SAASC,eAAT,QAAgC,iBAAhC;AAGA,eAAc,MAAOC,eAAP,CAAsB;EAOlC;;;;;;;EAOAC,YACEC,GADF,EAEE;IACEC,OAAO,GAAG,EADZ;IAEEC,MAFF;IAGEC,KAHF;IAIEC;EAJF,IAUI,EAZN,EAYQ;IAEN,KAAKJ,GAAL,GAAWA,GAAX;IACA,KAAKC,OAAL,GAAYI,gCAAQR,eAAR,GAA4BI,OAA5B,CAAZ;IACA,KAAKC,MAAL,GAAcA,MAAd;IACA,KAAKC,KAAL,GAAaA,KAAb;IACA,KAAKG,kBAAL,GAA0BF,YAA1B;EACD;EAED;;;;;;;EAKAG,IAAI,CAACC,KAAD,EAAc;IAChB,KAAKP,OAAL,CAAa,eAAb,IAAgC,UAAUO,KAAK,EAA/C;IACA,OAAO,IAAP;EACD;EAED;;;;;;;EAKAC,IAAI,CAAUC,KAAV,EAAuB;IACzB,MAAMV,GAAG,GAAG,GAAG,KAAKA,GAAG,IAAIU,KAAK,EAAhC;IACA,OAAO,IAAIf,qBAAJ,CAA6BK,GAA7B,EAAkC;MACvCC,OAAO,EAAE,KAAKA,OADyB;MAEvCC,MAAM,EAAE,KAAKA,MAF0B;MAGvCC,KAAK,EAAE,KAAKA,KAH2B;MAIvCG,kBAAkB,EAAE,KAAKA;IAJc,CAAlC,CAAP;EAMD;EAED;;;;;;;;;;EAQAK,GAAG,CACDC,EADC,EAEDC,MAFC,EAGD;IACEC,IAAI,GAAG,KADT;IAEEC,KAAK,GAAG;EAFV,IAMI,EATH,EASK;IAEN,MAAMf,GAAG,GAAG,GAAG,KAAKA,GAAG,QAAQY,EAAE,EAAjC;IACA,OAAO,IAAIhB,mBAAJ,CAA2BI,GAA3B,EAAgC;MACrCC,OAAO,EAAE,KAAKA,OADuB;MAErCC,MAAM,EAAE,KAAKA,MAFwB;MAGrCC,KAAK,EAAE,KAAKA,KAHyB;MAIrCG,kBAAkB,EAAE,KAAKA;IAJY,CAAhC,EAKJK,GALI,CAKAE,MALA,EAKQ;MAAEC,IAAF;MAAQC;IAAR,CALR,CAAP;EAMD;;AAtFiC","names":["PostgrestQueryBuilder","PostgrestRpcBuilder","DEFAULT_HEADERS","PostgrestClient","constructor","url","headers","schema","fetch","throwOnError","Object","shouldThrowOnError","auth","token","from","table","rpc","fn","params","head","count"],"sourceRoot":"","sources":["../../src/PostgrestClient.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}