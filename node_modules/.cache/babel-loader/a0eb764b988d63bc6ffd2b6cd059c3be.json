{"ast":null,"code":"import { PostgrestBuilder } from './types';\nimport PostgrestFilterBuilder from './PostgrestFilterBuilder';\nexport default class PostgrestRpcBuilder extends PostgrestBuilder {\n  constructor(url, {\n    headers = {},\n    schema,\n    fetch,\n    shouldThrowOnError\n  } = {}) {\n    super({\n      fetch,\n      shouldThrowOnError\n    });\n    this.url = new URL(url);\n    this.headers = Object.assign({}, headers);\n    this.schema = schema;\n  }\n  /**\n   * Perform a function call.\n   */\n\n\n  rpc(params, {\n    head = false,\n    count = null\n  } = {}) {\n    if (head) {\n      this.method = 'HEAD';\n\n      if (params) {\n        Object.entries(params).forEach(([name, value]) => {\n          this.url.searchParams.append(name, value);\n        });\n      }\n    } else {\n      this.method = 'POST';\n      this.body = params;\n    }\n\n    if (count) {\n      if (this.headers['Prefer'] !== undefined) this.headers['Prefer'] += `,count=${count}`;else this.headers['Prefer'] = `count=${count}`;\n    }\n\n    return new PostgrestFilterBuilder(this);\n  }\n\n}","map":{"version":3,"mappings":"AAAA,SAAgBA,gBAAhB,QAAwC,SAAxC;AACA,OAAOC,sBAAP,MAAmC,0BAAnC;AAEA,eAAc,MAAOC,mBAAP,SAAsCF,gBAAtC,CAAyD;EACrEG,YACEC,GADF,EAEE;IACEC,OAAO,GAAG,EADZ;IAEEC,MAFF;IAGEC,KAHF;IAIEC;EAJF,IAUI,EAZN,EAYQ;IAEN,MAAO;MAAED,KAAF;MAASC;IAAT,CAAP;IACA,KAAKJ,GAAL,GAAW,IAAIK,GAAJ,CAAQL,GAAR,CAAX;IACA,KAAKC,OAAL,GAAYK,kBAAQL,OAAR,CAAZ;IACA,KAAKC,MAAL,GAAcA,MAAd;EACD;EAED;;;;;EAGAK,GAAG,CACDC,MADC,EAED;IACEC,IAAI,GAAG,KADT;IAEEC,KAAK,GAAG;EAFV,IAMI,EARH,EAQK;IAEN,IAAID,IAAJ,EAAU;MACR,KAAKE,MAAL,GAAc,MAAd;;MAEA,IAAIH,MAAJ,EAAY;QACVF,MAAM,CAACM,OAAP,CAAeJ,MAAf,EAAuBK,OAAvB,CAA+B,CAAC,CAACC,IAAD,EAAOC,KAAP,CAAD,KAAkB;UAC/C,KAAKf,GAAL,CAASgB,YAAT,CAAsBC,MAAtB,CAA6BH,IAA7B,EAAmCC,KAAnC;QACD,CAFD;MAGD;IACF,CARD,MAQO;MACL,KAAKJ,MAAL,GAAc,MAAd;MACA,KAAKO,IAAL,GAAYV,MAAZ;IACD;;IAED,IAAIE,KAAJ,EAAW;MACT,IAAI,KAAKT,OAAL,CAAa,QAAb,MAA2BkB,SAA/B,EAA0C,KAAKlB,OAAL,CAAa,QAAb,KAA0B,UAAUS,KAAK,EAAzC,CAA1C,KACK,KAAKT,OAAL,CAAa,QAAb,IAAyB,SAASS,KAAK,EAAvC;IACN;;IAED,OAAO,IAAIb,sBAAJ,CAA2B,IAA3B,CAAP;EACD;;AArDoE","names":["PostgrestBuilder","PostgrestFilterBuilder","PostgrestRpcBuilder","constructor","url","headers","schema","fetch","shouldThrowOnError","URL","Object","rpc","params","head","count","method","entries","forEach","name","value","searchParams","append","body","undefined"],"sourceRoot":"","sources":["../../../src/lib/PostgrestRpcBuilder.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}